#!/usr/bin/env tclsh
package require tcltest

tcltest::test basegui-1.1 {package load} {
    lappend auto_path .
    package require paul
} {0.2.2}

tcltest::test basegui-1.2 {basegui test} {
    package require paul
    set app [::paul::basegui new -style clam]
    set f [$app getFrame]
    set tf [ttk::frame $f.tframe]
    set t [text $tf.text -wrap none]
    $app autoscroll $t
    for {set i 0} {$i < 30} {incr i} {
        $t insert end "Lorem ipsum dolor sit amet, ....\n\n"
    }
    pack $tf -side top -fill both -expand yes
    update idletasks
    after 3000 
    set x 1
} {1}

tcltest::test basegui-1.2 {exit test application} {
    destroy [winfo children .]
} {}

tcltest::test basegui-1.3 {simple text editor} {
    update idletasks
    # not sure why destroy winfo children does not work
    destroy .mbar
    destroy .frame
    destroy .sep
    destroy .stb
    after 1000 
    package require paul
    oo::class create EditorApp {
        superclass paul::basegui
        variable textw
        constructor {args} {
            next {*}$args
            set frame [my getFrame]
            set textw [text $frame.t -wrap none]
            [self] autoscroll $textw
        }
        # added functionality
        # access functionality of the text widget
        # like: % app text insert end "hello basegui world"
        method text {args} {
          $textw {*}$args
        }
    }
    #start editor
    set app [EditorApp new]
    $app text insert end "Hello EditorApp!!"
    $app addStatusBar
    $app progress 50
    $app message "Editor was loaded!"
    update idletasks
    after 3000 
    set x 1
} {1}


